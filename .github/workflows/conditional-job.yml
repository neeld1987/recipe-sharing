name: sample
on:
  push:

jobs:
  conditional_job_check_files:
      runs-on: ubuntu-latest
      name: Test changed-files
      steps:
        - uses: actions/checkout@v3
          with:
            fetch-depth: 0  # OR "2" -> To retrieve the preceding commit.

        # Example 1
        - name: Get changed files
          id: changed-files
          uses: jitterbit/get-changed-files@v1

        # NOTE: `since_last_remote_commit: true` is implied by default and falls back to the previous local commit.

        - name: List all changed files
          run: |
            $currentBranch = git branch --show-current
            echo $currentBranch
            $changedFiles = git diff --name-only $currentBranch $(git merge-base $currentBranch master)
            echo $changedFiles
            for file in ${{ $changedFiles }}; do
              echo "$file was changed"
            done
      
          

  # Run the job only with "docs_changed" equals "True"
  conditional_job:
    runs-on: ubuntu-latest
    needs: [ conditional_job_check_files ]
    if: needs.conditional_job_check_files.outputs.docs_changed == 'True'
    steps:
      - shell: pwsh
        run: echo publish docs